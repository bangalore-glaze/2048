<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2048 Game</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #faf8ef;
    font-family: 'Arial', sans-serif;
  }
  #game-container {
    width: 400px;
    height: 400px;
    background: #bbada0;
    border-radius: 10px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 10px;
    padding: 10px;
  }
  .tile {
    width: 100%;
    height: 100%;
    background: #cdc1b4;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    font-weight: bold;
    color: #776e65;
    transition: all 0.2s ease;
  }
  .tile-2 { background: #eee4da; }
  .tile-4 { background: #ede0c8; }
  .tile-8 { background: #f2b179; color: #fff; }
  .tile-16 { background: #f59563; color: #fff; }
  .tile-32 { background: #f67c5f; color: #fff; }
  .tile-64 { background: #f65e3b; color: #fff; }
  .tile-128 { background: #edcf72; color: #fff; font-size:1.5rem;}
  .tile-256 { background: #edcc61; color: #fff; font-size:1.5rem;}
  .tile-512 { background: #edc850; color: #fff; font-size:1.5rem;}
  .tile-1024 { background: #edc53f; color: #fff; font-size:1.2rem;}
  .tile-2048 { background: #edc22e; color: #fff; font-size:1.2rem;}
</style>
</head>
<body>

<div id="game-container"></div>

<script>
const gridSize = 4;
let grid = [];

// Initialize grid
function initGrid() {
  grid = [];
  for(let i=0;i<gridSize;i++){
    grid[i] = [];
    for(let j=0;j<gridSize;j++){
      grid[i][j] = 0;
    }
  }
  addRandomTile();
  addRandomTile();
  updateGrid();
}

// Add a random tile (2 or 4)
function addRandomTile() {
  let empty = [];
  for(let i=0;i<gridSize;i++){
    for(let j=0;j<gridSize;j++){
      if(grid[i][j] === 0) empty.push({x:i,y:j});
    }
  }
  if(empty.length === 0) return;
  let {x,y} = empty[Math.floor(Math.random()*empty.length)];
  grid[x][y] = Math.random() < 0.9 ? 2 : 4;
}

// Update the visual grid
function updateGrid() {
  const container = document.getElementById('game-container');
  container.innerHTML = '';
  for(let i=0;i<gridSize;i++){
    for(let j=0;j<gridSize;j++){
      const tile = document.createElement('div');
      tile.classList.add('tile');
      if(grid[i][j] !== 0) tile.classList.add(`tile-${grid[i][j]}`);
      tile.textContent = grid[i][j] === 0 ? '' : grid[i][j];
      container.appendChild(tile);
    }
  }
}

// Move functions
function slide(row){
  row = row.filter(val => val!==0);
  for(let i=0;i<row.length-1;i++){
    if(row[i]===row[i+1]){
      row[i]*=2;
      row[i+1]=0;
    }
  }
  row = row.filter(val => val!==0);
  while(row.length<gridSize) row.push(0);
  return row;
}

function moveLeft(){
  for(let i=0;i<gridSize;i++){
    grid[i] = slide(grid[i]);
  }
}

function moveRight(){
  for(let i=0;i<gridSize;i++){
    grid[i] = slide(grid[i].reverse()).reverse();
  }
}

function moveUp(){
  for(let j=0;j<gridSize;j++){
    let col = [];
    for(let i=0;i<gridSize;i++) col.push(grid[i][j]);
    col = slide(col);
    for(let i=0;i<gridSize;i++) grid[i][j]=col[i];
  }
}

function moveDown(){
  for(let j=0;j<gridSize;j++){
    let col = [];
    for(let i=0;i<gridSize;i++) col.push(grid[i][j]);
    col = slide(col.reverse()).reverse();
    for(let i=0;i<gridSize;i++) grid[i][j]=col[i];
  }
}

// Check if game over
function isGameOver(){
  for(let i=0;i<gridSize;i++){
    for(let j=0;j<gridSize;j++){
      if(grid[i][j]===0) return false;
      if(i<gridSize-1 && grid[i][j]===grid[i+1][j]) return false;
      if(j<gridSize-1 && grid[i][j]===grid[i][j+1]) return false;
    }
  }
  alert("Game Over!");
}

// Key controls
document.addEventListener('keydown', (e)=>{
  let moved = true;
  switch(e.key){
    case 'ArrowLeft': moveLeft(); break;
    case 'ArrowRight': moveRight(); break;
    case 'ArrowUp': moveUp(); break;
    case 'ArrowDown': moveDown(); break;
    default: moved=false;
  }
  if(moved){
    addRandomTile();
    updateGrid();
    isGameOver();
  }
});

// Start the game
initGrid();
</script>

</body>
</html>
